# –ü—Ä–æ–µ–∫—Ç: LED Control —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Raspberry Pi –∏ ESP32

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ (LED1, LED2, LED3), –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ –∫ ESP32, —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ API –Ω–∞ Raspberry Pi.

---

## üß† –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ESP32:
- –ü–æ–¥–Ω–∏–º–∞–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É `80`.
- –î–æ—Å—Ç—É–ø–µ–Ω –ø–æ mDNS-–∏–º–µ–Ω–∏: `esp32block.local`.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—É—Ç–∏:  
  `/led1_on`, `/led1_off`, `/led1_blink`  
  `/led2_on`, `/led2_off`, `/led2_blink`  
  `/led3_on`, `/led3_off`, `/led3_blink`

### Raspberry Pi:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—Ç—É `5000`.
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
  - API (`/api/ledX/action`)
  - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Bootstrap)
  - –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ESP32

–†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (—Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–æ–≤, VPN –∏ —Ç.–¥.).

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/home/pi/led_control/
‚îú‚îÄ‚îÄ app.py               # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html       # HTML-—à–∞–±–ª–æ–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ static/              # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Å—Ç–∏–ª–∏/—Å–∫—Ä–∏–ø—Ç—ã)
‚îî‚îÄ‚îÄ README.md            # —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª –æ–ø–∏—Å–∞–Ω–∏—è
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ pip:
```bash
sudo apt-get update
sudo apt-get install -y python3 python3-pip
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip3 install flask requests
```

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ `/home/pi/led_control/`.

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ESP32

- –ó–∞–ª–∏—Ç—å —Å–∫–µ—Ç—á, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–Ω–∏–º–∞–µ—Ç HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ `esp32block.local`.
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ mDNS —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–µ—Ç–∏ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å `ping esp32block.local`).

---

## üöÄ –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é

```bash
cd /home/pi/led_control
python3 app.py
```

–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä:  
`http://<IP_–º–∞–ª–∏–Ω–∫–∏>:5000`  
(–Ω–∞–ø—Ä–∏–º–µ—Ä: `http://192.168.1.10:5000`)

---

## üîÅ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd

–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo nano /etc/systemd/system/ledcontrol.service
```

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
```ini
[Unit]
Description=LED Control Flask Service
After=network-online.target
Wants=network-online.target

[Service]
User=pi
WorkingDirectory=/home/pi/led_control
ExecStart=/usr/bin/python3 /home/pi/led_control/app.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
```bash
sudo systemctl daemon-reload
sudo systemctl enable ledcontrol.service
sudo systemctl start ledcontrol.service
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
systemctl status ledcontrol.service
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ESP32:
```bash
ping esp32block.local
```

–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```
http://192.168.x.x:5000
```

–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "LED1 ON" ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∏—Ç—å—Å—è.  
–ï—Å–ª–∏ ESP32 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∂–µ—Ç "ESP32 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω".

---

## üåê API

–ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–æ–≤:
```
GET /api/led1/on
GET /api/led1/off
GET /api/led1/blink
```

–ü—Ä–∏–º–µ—Ä:
```bash
curl http://<IP_–º–∞–ª–∏–Ω–∫–∏>:5000/api/led1/on
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "success",
  "message": "LED1 is ON permanently"
}
```

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª—É–∂–±—ã Bonjour/mDNS –∞–∫—Ç–∏–≤–Ω—ã (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ Windows).
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å `esp32block.local` –Ω–∞ IP –≤ `ESP32_BASE_URL` –≤ `app.py`.

---

## üõ† –ê–≤—Ç–æ—Ä—ã

- üß† Backend: Raspberry Pi + Flask
- ‚ö°Ô∏è Hardware: ESP32 (Wi-Fi, WebServer)
- üñ• UI: Bootstrap HTML (–≤ `templates/index.html`)

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.
